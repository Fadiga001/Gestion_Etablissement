<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8">
  <title>Titre de la page</title>
  <link rel="stylesheet" href="style.css">
  <style>

    .table1{
        margin: auto;
        width: 70%;
    }


    caption{
        margin-left: 35%; 
        margin-right: 35%; 
        border: 2px solid skyblue;
        border-collapse: collapse;
        padding: 2px;
    }

.note{
    border-collapse: collapse;
    width: 100%;
}

 .entete, .titre, .contenu, .fin  {
        border: 1px solid black;
}

.entete, .titre, .fin{
    font-size: 13px;
}



.contenu{
    font-size: 13px;
}

.coeff{
    text-align: center;
}

.observation{
    margin: auto;
    width: 100%;
    text-align : center;
    padding : 3px;
}


.obs-td{
    text-decoration: underline;
}



    

  </style>
</head>
<body>

    <table class="table1">
  
        <caption>PREMIER SEMESTRE</caption>

        <tr> 
            <td class="left"> <span>Annéee Scolaire : {{ anneeActive }} </span></td>  
            <td class="right"> <span>Matricule : {{ etudiant.matricule }} </span></td> 
        </tr>

    </table>

    <table class="table1">

        <tr> 
            <td>Classe : {{ classe.codeClasse}}</td> 
        </tr>
        <tr> 
            <td>Nom & Prénoms : {{ etudiant.nom|upper}} {{ etudiant.prenoms|upper}}</td> 
        </tr>

    </table>

    <table class="table1">
  
        <tr> 
            <td class="left"> <span>Date de naissance : {{ etudiant.dateNaissance|date('d/m/Y') }} </span></td>  
            <td class="right"> <span>Lieu de naissance : {{ etudiant.lieuNaissance }} </span></td> 
        </tr>

    </table>

    <table class="note">
  
        <tr> 
            <th class="entete"> MATIERES </th>  
            <th class="entete"> MOY, <br>/20 </th> 
            <th class="entete"> COEFF</th> 
            <th class="entete"> MOY AVEC <br>COEFF </th> 
            <th class="entete"> NOM DU PROFESSEUR </th> 
            <th class="entete"> APPRECIATIONS DES PROFESSEURS </th> 
        </tr>
        
        <tr> 
            <th class="titre"> MATIERES GENERALES </th>  
            <th class="titre"> </th> 
            <th class="titre"> </th> 
            <th class="titre">  </th> 
            <th class="titre">  </th> 
            <th class="titre">  </th> 
        </tr>
        <tr> 
            
            
                <td class="contenu"> 

                    {% for listeMat in listeMat %}

                        {% if listeMat.TypeMatiere == "MATIERES GENERALES" %}

                            {{listeMat.denomination | upper }}<br>

                        {% endif %}

                    {% endfor %}

                </td>  
                <td class="contenu coeff">

                    {% for listeMat in listeMat %}

                        {% for matGen in matGen %}

                            {% if listeMat.denomination == matGen.matiere.denomination %}

                                {{matGen.moyenne}} <br>

                            {% endif %}
    
                        {% endfor %}

                    {% endfor %}
                    
                </td> 
                <td class="contenu coeff">

                    {% for listeMat in listeMat %}

                        {% for matGen in matGen %}

                            {% if listeMat.denomination == matGen.matiere.denomination %}

                                {{ matGen.matiere.coefficient | number_format(2) }} <br>


                            {% endif %}
    
                        {% endfor %}

                    {% endfor %}

                </td> 
                <td class="contenu coeff">

                    {% for listeMat in listeMat %}

                        {% for matGen in matGen %}

                            {% if listeMat.denomination == matGen.matiere.denomination %}

                                {{ (matGen.moyenne * matGen.matiere.coefficient) | number_format(2) }} <br>

                            {% endif %}
    
                        {% endfor %}

                    {% endfor %}
                
                </td> 
                <td class="contenu">

                    {% for listeMat in listeMat %}

                        {% for matGen in matGen %}

                            {% if listeMat.denomination == matGen.matiere.denomination %}

                               {{ matGen.matiere.prof }} <br>

                            {% endif %}
    
                        {% endfor %}

                    {% endfor %}

                </td> 
                <td class="contenu">
                    {% for matGen in matGen %}
                        {% if matGen.moyenne >=0 and matGen.moyenne <= 7 %}
                                BLAME <br>
                        {% elseif matGen.moyenne > 7 and matGen.moyenne < 10 %}
                                INSUFFISANT <br>
                        {% elseif matGen.moyenne >= 10 and matGen.moyenne < 12 %}
                                PASSABLE <br>
                        {% elseif matGen.moyenne >= 12 and matGen.moyenne < 14 %}
                                ASSEZ-BIEN <br>
                        {% elseif matGen.moyenne >= 14 and matGen.moyenne < 16 %}
                                BIEN <br>
                        {% elseif matGen.moyenne >= 16 and matGen.moyenne < 18 %}
                                TRES-BIEN <br>
                        {% elseif matGen.moyenne >= 18 and matGen.moyenne < 20 %}
                                EXCELLENT <br>
                        {% endif %}
                    {% endfor %}
                </td> 
          
            
        </tr>
        <tr> 
            
            <th class="fin"> MOYENNE DES MATIERES GENERALES </th>  
            <th class="fin"> </th> 

            <th class="fin"> 
                {{ somCoeffMatGen | number_format(2) }}
            </th> 


            <th class="fin">  
                {{ somMoyMatGen | number_format(2) }}
            </th> 
            <th class="fin">  
                 Moyenne : 
                
                {% if somCoeffMatGen == 0 %}
                    0
                {% else %}
                    {{ (somMoyMatGen / somCoeffMatGen) | number_format(3)}}
                {% endif %}
                 
            </th> 
            <th class="fin">  </th> 
        </tr>


        <tr> 
            <th class="titre"> MATIERES PROFESSIONNELLES </th>  
            <th class="titre"> </th> 
            <th class="titre"> </th> 
            <th class="titre">  </th> 
            <th class="titre">  </th> 
            <th class="titre">  </th> 
        </tr>
        <tr> 
            
            
                <td class="contenu"> 

                    {% for listeMat in listeMat %}

                        {% if listeMat.TypeMatiere == "MATIERES PROFESSIONNELLES" %}

                            {{listeMat.denomination | upper }}<br>

                        {% endif %}

                    {% endfor %}

                </td>  
                <td class="contenu coeff">

                    {% for listeMat in listeMat %}

                        {% for matProfs in matProfs %}

                            {% if listeMat.denomination == matProfs.matiere.denomination %}

                                 {{ matProfs.moyenne | number_format(2) }} <br>

                            {% endif %}
    
                        {% endfor %}

                    {% endfor %}

                </td> 
                <td class="contenu coeff">

                    {% for listeMat in listeMat %}

                        {% for matProfs in matProfs %}

                            {% if listeMat.denomination == matProfs.matiere.denomination %}

                                 {{ matProfs.matiere.coefficient | number_format(2)}} <br>

                            {% endif %}
    
                        {% endfor %}

                    {% endfor %}

                </td> 
                <td class="contenu coeff">

                    {% for listeMat in listeMat %}

                        {% for matProfs in matProfs %}

                            {% if listeMat.denomination == matProfs.matiere.denomination %}

                                 {{ (matProfs.moyenne * matProfs.matiere.coefficient) | number_format(2)}} <br>

                            {% endif %}
    
                        {% endfor %}

                    {% endfor %}

                </td> 
                <td class="contenu">

                    {% for listeMat in listeMat %}

                        {% for matProfs in matProfs %}

                            {% if listeMat.denomination == matProfs.matiere.denomination %}

                                 {{ matProfs.matiere.prof }} <br>

                            {% endif %}
    
                        {% endfor %}

                    {% endfor %}

                </td> 
                <td class="contenu">
                    {% for matProfs in matProfs %}
                        {% if matProfs.moyenne >=0 and matProfs.moyenne <= 7 %}
                                BLAME <br>
                        {% elseif matProfs.moyenne > 7 and matProfs.moyenne < 10 %}
                                INSUFFISANT <br>
                        {% elseif matProfs.moyenne >= 10 and matProfs.moyenne < 12 %}
                                PASSABLE <br>
                        {% elseif matProfs.moyenne >= 12 and matProfs.moyenne < 14 %}
                                ASSEZ-BIEN <br>
                        {% elseif matProfs.moyenne >= 14 and matProfs.moyenne < 16 %}
                                BIEN <br>
                        {% elseif matProfs.moyenne >= 16 and matProfs.moyenne < 18 %}
                                TRES-BIEN <br>
                        {% elseif matProfs.moyenne >= 18 and matProfs.moyenne <= 20 %}
                                EXCELLENT <br>
                        {% endif %}
                    {% endfor %}
                </td> 
          
            
        </tr>
        <tr> 
            <th class="fin"> MOYENNE DES MATIERES PROFESSIONNELLES </th> 
            <th class="fin"> </th> 

            <th class="fin"> 
               
                {{ somCoeffmatProfs | number_format(2) }}
            </th> 
            <th class="fin">  
               
                {{ somMoymatProfs | number_format(2) }}
            </th> 
            <th class="fin">  

                 Moyenne : 

                {% if somCoeffmatProfs == 0 %}
                    0
                {% else %}
                 
                    {{ (somMoymatProfs / somCoeffmatProfs) | number_format(3)}}

                {% endif %}

            </th>  
            <th class="fin">  </th> 
        </tr>

        <tr> 
            <th class="fin">TOTAUX </th> 
            <th class="fin"> </th> 

            <th class="fin"> 
               
                {{ (somCoeffmatProfs + somCoeffMatGen) | number_format(2) }}
            </th> 
            <th class="fin">  
               
                {{ (somMoymatProfs + somMoyMatGen) | number_format(2) }}
            </th> 
            <th class="fin">  </th>  
            <th class="fin">  </th> 
        </tr>

        <tr> 
            <th class="fin">MOYENNE PREMIER SEMESTRE </th> 
            <th class="fin"> 
                {% if somCoeffmatProfs == 0 %}
                    0
                {% else %}
                 
                    {{ ( ((somMoymatProfs / somCoeffmatProfs) + (somMoyMatGen / somCoeffMatGen)) / 2 )  | number_format(3) }}

                {% endif %}

                 
            </th> 

            <th class="fin" colspan="2">
                CLASSEMENT : 
                {% for cle, notes in notes %}

                    {% if notes.matricule == etudiant.matricule and notes.classe == etudiant.classe and notes.anneeScolaire == anneeActive %}

                        {% if notes.moyenne == 0 %}
                            
                        {% else %}
                           
                           {% if cle == 1 and etudiant.sexe == "Femme" %}
                                {{cle}} ère 
                            {% elseif cle == 1 and etudiant.sexe == "Homme" %}
                                {{cle}} er 
                            {% else %}
                                {{cle}} ième
                            {% endif %}

                        {% endif %}


                    {% endif %}

                {% endfor %}
            </th> 
            
            <th class="fin">  </th>  
            <th class="fin">  </th> 
        </tr>

        <tr> 
            <th class="fin" colspan="6">

                <table class="observation" cellpadding="15">
                    <tr>
                        <td class="obs-td">OBSERVATIONS EVENTUELLES</td>
                        <td class="obs-td">AVIS DU CONSEIL DE CLASSE</td>
                        <td class="obs-td">DIRECTEUR D'INSTITUT {{ directeur.filiere.codeFiliere }}</td>
                    </tr>

                    <tr>
                        <th>
                            {% set moy = 0 %}

                            {% if somCoeffmatProfs == 0 or  somCoeffMatGen == 0 %}
                                {% set moy = 0 %}
                            {% else %}
                                {% set moy = ( ((somMoymatProfs / somCoeffmatProfs) + (somMoyMatGen / somCoeffMatGen)) / 2 )  | number_format(3) %}
                            {% endif %}

                            {% if moy >=0 and moy <= 7 %}
                                BLAME <br>
                            {% elseif moy > 7 and moy < 10 %}
                                INSUFFISANT <br>
                            {% elseif moy >= 10 and moy < 12 %}
                                PASSABLE <br>
                            {% elseif moy >= 12 and moy < 14 %}
                                ASSEZ-BIEN <br>
                            {% elseif moy >= 14 and moy < 16 %}
                                BIEN <br>
                            {% elseif moy >= 16 and moy < 18 %}
                                TRES-BIEN <br>
                            {% elseif moy >= 18 and moy <= 20 %}
                                EXCELLENT 
                            {% endif %}
                        </th>
                        <th></th>
                        <th>
                            {{directeur.filiere.directeur}}
                        </th>
                    </tr>
                </table>
                 
            </th> 
            
        </tr>

    </table>

</body>
</html>